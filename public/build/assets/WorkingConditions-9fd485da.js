import{d as N,r as w,l as f,a as o,o as D,c as F,w as n,b as e,p as R,j as A,g as $,m as x,h as T,f as I}from"./app-6af384a5.js";import{I as j}from"./IconEdit-1cdd379f.js";const E=N({__name:"AddWorkingCondition",emits:["addWorkingCondition"],setup(k,{emit:p}){const i=w(),r=f({dialog:!1,rules:[a=>a==null||a==""?"toldiring":!0]}),c=f({name:null});async function s(){const{valid:a}=await i.value.validate();a!=!1&&x.post("working_condition",c).then(({data:t})=>{r.dialog=!1,p("addWorkingCondition",t)})}return(a,t)=>{const m=o("v-btn"),g=o("v-card-title"),d=o("v-text-field"),l=o("v-col"),u=o("v-row"),C=o("v-container"),h=o("v-card-text"),V=o("FormFooter"),b=o("v-form"),y=o("v-card"),W=o("v-dialog");return D(),F(u,{justify:"end",class:"flex-0-0 ma-0 pb-2 px-4 overflow-y-auto"},{default:n(()=>[e(W,{modelValue:r.dialog,"onUpdate:modelValue":t[3]||(t[3]=_=>r.dialog=_),persistent:"",width:"512",location:"right"},{activator:n(({props:_})=>[e(m,R({icon:"mdi-plus"},_),null,16)]),default:n(()=>[e(y,{class:"bg-white"},{default:n(()=>[e(b,{onSubmit:A(s,["prevent"]),ref_key:"formTag",ref:i,onVnodeMounted:t[2]||(t[2]=_=>i.value.reset())},{default:n(()=>[e(g,null,{default:n(()=>[$(" Mehnat sharoitini kiritish ")]),_:1}),e(h,{class:"pa-0"},{default:n(()=>[e(C,null,{default:n(()=>[e(u,null,{default:n(()=>[e(l,{cols:"12",class:"pt-0"},{default:n(()=>[e(d,{label:"Nomi",modelValue:c.name,"onUpdate:modelValue":t[0]||(t[0]=_=>c.name=_),rules:r.rules},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{onClose:t[1]||(t[1]=_=>r.dialog=!1)})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),S=N({__name:"EditWorkingCondition",props:["current"],emits:["editWorkingCondition"],setup(k,{expose:p,emit:i}){const{current:r}=k,c=w(),s=f({dialog:!1,rules:[d=>d==null||d==""?"toldiring":!0]}),a=f({name:null});async function t(){const{valid:d}=await c.value.validate();d!=!1&&x.patch(`working_condition/${r.selected}`,a).then(({data:l})=>{s.dialog=!1,i("editWorkingCondition",l)})}async function m(){c.value.reset(),x.get(`working_condition/${r.selected}`).then(({data:d})=>{a.name=d.name})}return p({toggle:()=>s.dialog=!0}),(d,l)=>{const u=o("v-card-title"),C=o("v-text-field"),h=o("v-col"),V=o("v-row"),b=o("v-container"),y=o("v-card-text"),W=o("FormFooter"),_=o("v-card"),B=o("v-form"),M=o("v-dialog");return D(),F(M,{modelValue:s.dialog,"onUpdate:modelValue":l[2]||(l[2]=v=>s.dialog=v),persistent:"",width:"512",location:"right"},{default:n(()=>[e(B,{onSubmit:A(t,["prevent"]),ref_key:"formTag",ref:c,onVnodeMounted:m},{default:n(()=>[e(_,{class:"bg-white"},{default:n(()=>[e(u,null,{default:n(()=>[$(" Mehnat sharoitini tahrirlash ")]),_:1}),e(y,{class:"pa-0"},{default:n(()=>[e(b,null,{default:n(()=>[e(V,null,{default:n(()=>[e(h,{cols:"12",class:"pt-0"},{default:n(()=>[e(C,{color:"teal",label:"Nomi",modelValue:a.name,"onUpdate:modelValue":l[0]||(l[0]=v=>a.name=v),variant:"underlined","hide-details":"auto",rules:s.rules},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e(W,{onClose:l[1]||(l[1]=v=>s.dialog=!1)})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])}}}),U={class:"d-flex flex-column"},G={class:"d-flex justify-space-between items-center"},q=N({__name:"WorkingConditions",setup(k){const p=w(),i=f({selected:null,gridApi:null});function r(t){i.gridApi.applyTransaction({add:[t],addIndex:0})}function c(t){i.gridApi.getRowNode(t.id).setData(t)}const s=f([{field:"id",headerName:"Kod",width:80},{field:"name",headerName:"Nomi",flex:1},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],headerName:"",width:60,cellRenderer:j,headerClass:["px-2"],onCellClicked:({data:t})=>{i.selected=t.id,p.value.toggle()}}]),a=w([]);return x.get("working_condition").then(({data:t})=>a.value=t),(t,m)=>{const g=o("Breadcrumbs"),d=o("AgGridVue"),l=o("v-spacer");return D(),T("section",U,[I("div",G,[e(g),e(E,{onAddWorkingCondition:r}),e(S,{onEditWorkingCondition:c,ref_key:"editComponent",ref:p,current:i},null,8,["current"])]),e(l,{class:"px-4"},{default:n(()=>[e(d,{headerHeight:34,class:"ag-theme-material h-100",getRowId:({data:u})=>u.id,columnDefs:s,rowData:a.value,onGridReady:m[0]||(m[0]=u=>i.gridApi=u.api),animateRows:"true"},null,8,["getRowId","columnDefs","rowData"])]),_:1})])}}});export{q as default};
