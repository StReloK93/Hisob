import{d as k,l as g,a as e,o as x,c as V,w as l,e as o,n as N,g as b,m as C,r as h,h as A,b as B}from"./app-e1ef3618.js";import{r as W}from"./helpers-ca74a7fa.js";import{I as M}from"./IconEdit-2ccc15a7.js";const R=k({__name:"AddWorkingCondition",emits:["addWorkingCondition"],setup(w,{emit:_}){const n=g({dialog:!1}),r=g({name:null});async function d(){await C.post("working_condition",r).then(({data:s})=>{n.dialog=!1,_("addWorkingCondition",s)})}return(s,a)=>{const t=e("v-btn"),p=e("v-text-field"),c=e("v-col"),i=e("v-row"),f=e("CustomForm"),u=e("v-dialog");return x(),V(i,{justify:"end",class:"flex-0-0 ma-0 pb-2 px-4 overflow-y-auto"},{default:l(()=>[o(u,{modelValue:n.dialog,"onUpdate:modelValue":a[2]||(a[2]=m=>n.dialog=m),persistent:"",width:"512",location:"right"},{activator:l(({props:m})=>[o(t,N({icon:"mdi-plus"},m),null,16)]),default:l(()=>[o(f,{submitMethod:d,onClose:a[1]||(a[1]=m=>n.dialog=!1),title:"Mehnat sharoitini kiritish"},{default:l(()=>[o(i,null,{default:l(()=>[o(c,{cols:"12",class:"pt-0"},{default:l(()=>[o(p,{label:"Nomi",modelValue:r.name,"onUpdate:modelValue":a[0]||(a[0]=m=>r.name=m),rules:b(W)},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),$=k({__name:"EditWorkingCondition",props:["current"],emits:["editWorkingCondition"],setup(w,{expose:_,emit:n}){const{current:r}=w,d=g({dialog:!1}),s=g({name:null});async function a(){await C.patch(`working_condition/${r.selected}`,s).then(({data:c})=>{d.dialog=!1,n("editWorkingCondition",c)})}async function t(){C.get(`working_condition/${r.selected}`).then(({data:c})=>{s.name=c.name})}return _({toggle:()=>d.dialog=!0}),(c,i)=>{const f=e("v-text-field"),u=e("v-col"),m=e("v-row"),y=e("CustomForm"),D=e("v-dialog");return x(),V(D,{modelValue:d.dialog,"onUpdate:modelValue":i[2]||(i[2]=v=>d.dialog=v),persistent:"",width:"512",location:"right"},{default:l(()=>[o(y,{submitMethod:a,onClose:i[1]||(i[1]=v=>d.dialog=!1),onVnodeMounted:t,title:"Mehnat sharoitini tahrirlash"},{default:l(()=>[o(m,null,{default:l(()=>[o(u,{cols:"12",class:"pt-0"},{default:l(()=>[o(f,{label:"Nomi",modelValue:s.name,"onUpdate:modelValue":i[0]||(i[0]=v=>s.name=v),rules:b(W)},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"])}}}),F={class:"d-flex flex-column"},I={class:"d-flex justify-space-between items-center"},G=k({__name:"WorkingConditions",setup(w){const _=h(),n=g({selected:null,gridApi:null});function r(t){n.gridApi.applyTransaction({add:[t],addIndex:0})}function d(t){n.gridApi.getRowNode(t.id).setData(t)}const s=g([{field:"id",headerName:"Kod",width:80},{field:"name",headerName:"Nomi",flex:1},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],headerName:"",width:60,cellRenderer:M,headerClass:["px-2"],onCellClicked:({data:t})=>{n.selected=t.id,_.value.toggle()}}]),a=h([]);return C.get("working_condition").then(({data:t})=>a.value=t),(t,p)=>{const c=e("Breadcrumbs"),i=e("AgGridVue"),f=e("v-spacer");return x(),A("section",F,[B("div",I,[o(c),o(R,{onAddWorkingCondition:r}),o($,{onEditWorkingCondition:d,ref_key:"editComponent",ref:_,current:n},null,8,["current"])]),o(f,{class:"px-4"},{default:l(()=>[o(i,{headerHeight:34,defaultColDef:{sortable:!0},class:"ag-theme-material h-100",getRowId:({data:u})=>u.id,columnDefs:s,rowData:a.value,onGridReady:p[0]||(p[0]=u=>n.gridApi=u.api),animateRows:"true"},null,8,["getRowId","columnDefs","rowData"])]),_:1})])}}});export{G as default};
