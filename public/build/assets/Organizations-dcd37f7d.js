import{I as j}from"./IconEdit-40aac784.js";import{B as E}from"./Button-e8119474.js";import{_ as I,A as F}from"./ag-grid.css_vue_type_style_index_0_src_true_lang-2771027d.js";import{d as N,j as f,l as $,a as o,o as O,c as q,w as a,b as e,m as Q,i as B,f as w,e as k,k as h,r as G,h as T,g as Y}from"./app-edcdceef.js";const M=k("span",null,"Bo'linma kiritish formasi",-1),P=N({__name:"AddOrganization",emits:["addOrganization"],setup(V,{emit:p}){const i=f({dialog:!1}),s=f({name:null,short_name:[],isActive:!0});function r(){h.post("organization",s).then(({data:n})=>{i.dialog=!1,p("addOrganization",n)})}return $(()=>i.dialog,n=>{n&&(s.name=null,s.short_name=null,s.isActive=!0)}),(n,t)=>{const u=o("v-btn"),g=o("v-card-title"),m=o("v-text-field"),c=o("v-col"),l=o("v-switch"),x=o("v-row"),b=o("v-container"),v=o("v-card-text"),z=o("v-spacer"),A=o("v-card-actions"),y=o("v-card"),C=o("v-dialog");return O(),q(x,{justify:"end",class:"flex-0-0 ma-0 pb-2 px-4 overflow-y-auto"},{default:a(()=>[e(C,{modelValue:i.dialog,"onUpdate:modelValue":t[4]||(t[4]=d=>i.dialog=d),persistent:"",width:"512",location:"right"},{activator:a(({props:d})=>[e(u,Q({icon:"mdi-plus",color:"teal"},d),null,16)]),default:a(()=>[e(y,{tag:"form",class:"bg-white",onSubmit:B(r,["prevent"])},{default:a(()=>[e(g,{class:"bg-blue-grey-lighten-5"},{default:a(()=>[M]),_:1}),e(v,{class:"pa-0"},{default:a(()=>[e(b,null,{default:a(()=>[e(x,null,{default:a(()=>[e(c,{cols:"12",class:"pt-0"},{default:a(()=>[e(m,{color:"teal",label:"Nomi",variant:"underlined","hide-details":"auto",modelValue:s.name,"onUpdate:modelValue":t[0]||(t[0]=d=>s.name=d),required:""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"pt-0"},{default:a(()=>[e(m,{color:"teal",label:"Qisqa nomi",variant:"underlined","hide-details":"auto",modelValue:s.short_name,"onUpdate:modelValue":t[1]||(t[1]=d=>s.short_name=d),required:""},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",class:"pt-0"},{default:a(()=>[e(l,{label:"Faolligi",modelValue:s.isActive,"onUpdate:modelValue":t[2]||(t[2]=d=>s.isActive=d),"hide-details":"auto",color:"teal"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(A,null,{default:a(()=>[e(z),e(u,{color:"blue-gray-1",variant:"text",type:"button",onClick:t[3]||(t[3]=d=>i.dialog=!1)},{default:a(()=>[w(" Yopish ")]),_:1}),e(u,{color:"blue-darken-1",variant:"text",type:"submit"},{default:a(()=>[w(" Saqlash ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])]),_:1})}}}),H=k("span",null,"Bo'linma kiritish formasi",-1),J=N({__name:"EditOrganization",props:["current"],emits:["editOrganization"],setup(V,{expose:p,emit:i}){const{current:s}=V,r=f({dialog:!1}),n=f({name:null,short_name:null,isActive:!0});function t(){h.patch(`organization/${s.selected}`,n).then(({data:c})=>{r.dialog=!1,i("editOrganization",c)})}function u(c){h.get(`organization/${c}`).then(({data:l})=>{n.name=l.name,n.short_name=l.short_name,n.isActive=!!l.isActive})}function g(){n.name=null,n.short_name=null,n.isActive=!0}return $(()=>r.dialog,c=>{c?u(s.selected):g()}),p({toggle:()=>r.dialog=!0}),(c,l)=>{const x=o("v-card-title"),b=o("v-text-field"),v=o("v-col"),z=o("v-switch"),A=o("v-row"),y=o("v-container"),C=o("v-card-text"),d=o("v-spacer"),D=o("v-btn"),U=o("v-card-actions"),R=o("v-card"),S=o("v-dialog");return O(),q(S,{modelValue:r.dialog,"onUpdate:modelValue":l[4]||(l[4]=_=>r.dialog=_),persistent:"",width:"512",location:"right"},{default:a(()=>[e(R,{tag:"form",class:"bg-white",onSubmit:B(t,["prevent"])},{default:a(()=>[e(x,{class:"bg-blue-grey-lighten-5"},{default:a(()=>[H]),_:1}),e(C,{class:"pa-0"},{default:a(()=>[e(y,null,{default:a(()=>[e(A,null,{default:a(()=>[e(v,{cols:"12",class:"pt-0"},{default:a(()=>[e(b,{color:"teal",label:"Nomi",variant:"underlined","hide-details":"auto",modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=_=>n.name=_),required:""},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",class:"pt-0"},{default:a(()=>[e(b,{color:"teal",label:"Qisqa nomi",variant:"underlined","hide-details":"auto",modelValue:n.short_name,"onUpdate:modelValue":l[1]||(l[1]=_=>n.short_name=_),required:""},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",class:"pt-0"},{default:a(()=>[e(z,{label:"Faolligi",modelValue:n.isActive,"onUpdate:modelValue":l[2]||(l[2]=_=>n.isActive=_),"hide-details":"auto",color:"teal"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(d),e(D,{color:"blue-gray-1",variant:"text",type:"button",onClick:l[3]||(l[3]=_=>r.dialog=!1)},{default:a(()=>[w(" Yopish ")]),_:1}),e(D,{color:"blue-darken-1",variant:"text",type:"submit"},{default:a(()=>[w(" Saqlash ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])}}}),K={class:"d-flex flex-column"},L={class:"d-flex justify-space-between items-center"},te=N({__name:"Organizations",setup(V){const p=G(),i=f({gridApi:null,organization:[],selected:null});function s(t){i.gridApi.applyTransaction({add:[t]})}function r(t){i.gridApi.getRowNode(t.id).setData(t)}const n=f([{field:"id",headerName:"â„–",width:65},{field:"name",headerName:"Nomi",flex:1},{field:"short_name",headerName:"Qisqa nomi",flex:1},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],field:"isActive",headerName:"Faolligi",cellRenderer:E,width:60,headerClass:["px-2"],onCellClicked:t=>{+h.post(`organization/set_activate/${t.data.id}`,{active:!t.value}).then(()=>{t.node.setDataValue("isActive",!t.value)})}},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],headerName:"",width:60,cellRenderer:j,headerClass:["px-2"],onCellClicked:({data:t})=>{i.selected=t.id,p.value.toggle()}}]);return h.get("organization").then(({data:t})=>i.organization=t),(t,u)=>{const g=o("v-spacer");return O(),T("section",K,[k("div",L,[e(I),e(P,{onAddOrganization:s}),e(J,{onEditOrganization:r,ref_key:"editComponent",ref:p,current:i},null,8,["current"])]),e(g,{class:"px-4"},{default:a(()=>[e(Y(F),{class:"ag-theme-material h-100",getRowId:({data:m})=>m.id,columnDefs:n,rowData:i.organization,onGridReady:u[0]||(u[0]=m=>i.gridApi=m.api),animateRows:"true"},null,8,["getRowId","columnDefs","rowData"])]),_:1})])}}});export{te as default};
