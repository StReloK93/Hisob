import{I as S}from"./IconEdit-385ec21c.js";import{B as j}from"./Button-7d37e0ce.js";import{_ as E,A as L}from"./ag-grid.css_vue_type_style_index_0_src_true_lang-307e9286.js";import{d as D,r as B,j as p,k as F,a as o,o as N,c as I,w as t,b as e,m as T,i as R,f as x,e as A,l as m,h as q,g as G}from"./app-7beed944.js";const O=A("span",null,"Xodim kiritish",-1),X=D({__name:"AddUser",emits:["addUser"],setup($,{emit:f}){function d(){}const c=B(),i=p({dialog:!1,organizations:null,positions:null,inputLoading:!1,rules:[a=>a==null||a==""?"toldiring":!0]}),n=p({name:null,login:null,organizations:[]});function s(){n.name=null,n.login=null,n.organizations=[]}return F(()=>i.dialog,a=>{a&&s()}),(a,l)=>{const r=o("v-btn"),v=o("v-card-title"),g=o("v-text-field"),w=o("v-col"),b=o("v-row"),y=o("v-container"),V=o("v-card-text"),U=o("v-spacer"),h=o("v-card-actions"),C=o("v-form"),k=o("v-card"),z=o("v-dialog");return N(),I(b,{justify:"end",class:"flex-0-0 ma-0 pb-2 px-4 overflow-y-auto"},{default:t(()=>[e(z,{modelValue:i.dialog,"onUpdate:modelValue":l[2]||(l[2]=u=>i.dialog=u),persistent:"",width:"512",location:"right"},{activator:t(({props:u})=>[e(r,T({icon:"mdi-plus",color:"teal"},u),null,16)]),default:t(()=>[e(k,null,{default:t(()=>[e(C,{ref_key:"formTag",ref:c,"fast-fail":"",class:"bg-white",onSubmit:R(d,["prevent"])},{default:t(()=>[e(v,{class:"bg-blue-grey-lighten-5"},{default:t(()=>[O]),_:1}),e(V,{class:"pa-0"},{default:t(()=>[e(y,null,{default:t(()=>[e(b,null,{default:t(()=>[e(w,{cols:"12",class:"pt-0"},{default:t(()=>[e(g,{loading:i.inputLoading,color:"teal",rules:i.rules,label:"F.I.O",variant:"underlined","hide-details":"auto",modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=u=>n.name=u),type:"number"},null,8,["loading","rules","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(U),e(r,{color:"blue-gray-1",variant:"text",type:"button",onClick:l[1]||(l[1]=u=>i.dialog=!1)},{default:t(()=>[x(" Yopish ")]),_:1}),e(r,{color:"teal",variant:"text",type:"submit"},{default:t(()=>[x(" Saqlash ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),Y=A("span",null,"Xodim ma'lumotlarini o'zgartirish",-1),H=D({__name:"EditUser",emits:["editUser"],setup($,{expose:f,emit:d}){const c=p({name:null,login:null,organizations:[]});function i(){}const n=p({rules:[a=>a==null||a==""?"toldiring":!0],dialog:!1,organizations:[]});return m.all([m.get("organization"),m.get("position")]).then(m.spread(({data:a},{data:l})=>{n.organizations=a})),f({toggle:()=>n.dialog=!0}),(a,l)=>{const r=o("v-card-title"),v=o("v-text-field"),g=o("v-col"),w=o("v-autocomplete"),b=o("v-row"),y=o("v-container"),V=o("v-card-text"),U=o("v-spacer"),h=o("v-btn"),C=o("v-card-actions"),k=o("v-form"),z=o("v-card"),u=o("v-dialog");return N(),I(u,{modelValue:n.dialog,"onUpdate:modelValue":l[3]||(l[3]=_=>n.dialog=_),persistent:"",width:"512",location:"right"},{default:t(()=>[e(z,null,{default:t(()=>[e(k,{ref:"form",class:"bg-white",onSubmit:R(i,["prevent"])},{default:t(()=>[e(r,{class:"bg-blue-grey-lighten-5"},{default:t(()=>[Y]),_:1}),e(V,{class:"pa-0"},{default:t(()=>[e(y,null,{default:t(()=>[e(b,null,{default:t(()=>[e(g,{cols:"12",class:"pt-0"},{default:t(()=>[e(v,{color:"teal",label:"Login",variant:"underlined",disabled:"","hide-details":"auto",modelValue:c.name,"onUpdate:modelValue":l[0]||(l[0]=_=>c.name=_),type:"number"},null,8,["modelValue"])]),_:1}),e(g,{cols:"12",class:"pt-0"},{default:t(()=>[e(v,{color:"teal",label:"F.I.O",variant:"underlined","hide-details":"auto",modelValue:c.name,"onUpdate:modelValue":l[1]||(l[1]=_=>c.name=_),type:"number",rules:n.rules},null,8,["modelValue","rules"])]),_:1}),e(g,{cols:"12",class:"pt-0"},{default:t(()=>[e(w,{color:"teal",variant:"underlined",label:"Bo'linmalar",items:n.organizations,"item-title":"short_name","item-value":_=>_,multiple:"",chips:""},null,8,["items","item-value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(C,null,{default:t(()=>[e(U),e(h,{color:"blue-gray-1",type:"button",onClick:l[2]||(l[2]=_=>n.dialog=!1)},{default:t(()=>[x(" Yopish ")]),_:1}),e(h,{color:"blue-darken-1",type:"submit"},{default:t(()=>[x(" Saqlash ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])}}}),M={class:"d-flex flex-column"},P={class:"d-flex justify-space-between items-center"},Z=D({__name:"Users",setup($){const f=B(),d=p({gridApi:null,users:[],selected:null});function c(){}function i(){}const n=p([{field:"id",headerName:"â„–",width:65},{field:"name",headerName:"Nomi",flex:1},{field:"login",headerName:"Login"},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],field:"isActive",headerName:"Faolligi",cellRenderer:j,width:60,headerClass:["px-2"],onCellClicked:s=>{m.post(`organization/set_activate/${s.data.id}`,{active:!s.value}).then(()=>{s.node.setDataValue("isActive",!s.value)})}},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],headerName:"",width:60,cellRenderer:S,headerClass:["px-2"],onCellClicked:({data:s})=>{d.selected=s.id,f.value.toggle()}}]);return m.get("users").then(({data:s})=>d.users=s),(s,a)=>{const l=o("v-spacer");return N(),q("section",M,[A("div",P,[e(E),e(X,{onAddUser:c}),e(H,{onEditUser:i,ref_key:"editUserComp",ref:f,current:d},null,8,["current"])]),e(l,{class:"px-4"},{default:t(()=>[e(G(L),{headerHeight:34,class:"ag-theme-material h-100",getRowId:({data:r})=>r.id,columnDefs:n,rowData:d.users,onGridReady:a[0]||(a[0]=r=>d.gridApi=r.api),animateRows:"true"},null,8,["getRowId","columnDefs","rowData"])]),_:1})])}}});export{Z as default};
