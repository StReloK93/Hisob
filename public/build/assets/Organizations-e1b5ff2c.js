import{I as q}from"./IconEdit-6e831831.js";import{B as R}from"./Button-3c3d9b8f.js";import{d as C,l as p,n as O,a as o,o as N,c as B,w as l,e as t,p as $,j as D,f as F,m as v,r as j,h as S,b as E}from"./app-b1d08712.js";const I=C({__name:"AddOrganization",emits:["addOrganization"],setup(V,{emit:_}){const i=p({dialog:!1}),s=p({name:null,short_name:[],isActive:!0});function r(){v.post("organization",s).then(({data:n})=>{i.dialog=!1,_("addOrganization",n)})}return O(()=>i.dialog,n=>{n&&(s.name=null,s.short_name=null,s.isActive=!0)}),(n,e)=>{const u=o("v-btn"),g=o("v-card-title"),f=o("v-text-field"),c=o("v-switch"),a=o("v-col"),h=o("v-row"),x=o("v-container"),w=o("v-card-text"),b=o("FormFooter"),z=o("v-card"),A=o("v-dialog");return N(),B(h,{justify:"end",class:"flex-0-0 ma-0 pb-2 px-4 overflow-y-auto"},{default:l(()=>[t(A,{modelValue:i.dialog,"onUpdate:modelValue":e[4]||(e[4]=d=>i.dialog=d),persistent:"",width:"512",location:"right"},{activator:l(({props:d})=>[t(u,$({icon:"mdi-plus",color:"teal"},d),null,16)]),default:l(()=>[t(z,{tag:"form",class:"bg-white",onSubmit:D(r,["prevent"])},{default:l(()=>[t(g,null,{default:l(()=>[F(" Bo'linma kiritish ")]),_:1}),t(w,{class:"pa-0"},{default:l(()=>[t(x,null,{default:l(()=>[t(h,null,{default:l(()=>[t(a,{cols:"12",class:"pt-0"},{default:l(()=>[t(f,{class:"mb-2",label:"Nomi",modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=d=>s.name=d),required:""},null,8,["modelValue"]),t(f,{class:"mb-2",label:"Qisqa nomi",modelValue:s.short_name,"onUpdate:modelValue":e[1]||(e[1]=d=>s.short_name=d),required:""},null,8,["modelValue"]),t(c,{class:"mb-2",label:"Faolligi",modelValue:s.isActive,"onUpdate:modelValue":e[2]||(e[2]=d=>s.isActive=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(b,{onClose:e[3]||(e[3]=d=>i.dialog=!1)})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])]),_:1})}}}),G=C({__name:"EditOrganization",props:["current"],emits:["editOrganization"],setup(V,{expose:_,emit:i}){const{current:s}=V,r=p({dialog:!1}),n=p({name:null,short_name:null,isActive:!0});function e(){v.patch(`organization/${s.selected}`,n).then(({data:c})=>{r.dialog=!1,i("editOrganization",c)})}function u(c){v.get(`organization/${c}`).then(({data:a})=>{n.name=a.name,n.short_name=a.short_name,n.isActive=!!a.isActive})}function g(){n.name=null,n.short_name=null,n.isActive=!0}return O(()=>r.dialog,c=>{c?u(s.selected):g()}),_({toggle:()=>r.dialog=!0}),(c,a)=>{const h=o("v-card-title"),x=o("v-text-field"),w=o("v-switch"),b=o("v-col"),z=o("v-row"),A=o("v-container"),d=o("v-card-text"),y=o("FormFooter"),U=o("v-card"),k=o("v-dialog");return N(),B(k,{modelValue:r.dialog,"onUpdate:modelValue":a[4]||(a[4]=m=>r.dialog=m),persistent:"",width:"512",location:"right"},{default:l(()=>[t(U,{tag:"form",class:"bg-white",onSubmit:D(e,["prevent"])},{default:l(()=>[t(h,null,{default:l(()=>[F(" Bo'linmani tahrirlash ")]),_:1}),t(d,{class:"pa-0"},{default:l(()=>[t(A,null,{default:l(()=>[t(z,null,{default:l(()=>[t(b,{cols:"12",class:"pt-0"},{default:l(()=>[t(x,{class:"mb-2",label:"Nomi",modelValue:n.name,"onUpdate:modelValue":a[0]||(a[0]=m=>n.name=m),required:""},null,8,["modelValue"]),t(x,{class:"mb-2",label:"Qisqa nomi",modelValue:n.short_name,"onUpdate:modelValue":a[1]||(a[1]=m=>n.short_name=m),required:""},null,8,["modelValue"]),t(w,{class:"mb-2",label:"Faolligi",modelValue:n.isActive,"onUpdate:modelValue":a[2]||(a[2]=m=>n.isActive=m)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(y,{onClose:a[3]||(a[3]=m=>r.dialog=!1)})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])}}}),Q={class:"d-flex flex-column"},T={class:"d-flex justify-space-between items-center"},J=C({__name:"Organizations",setup(V){const _=j(),i=p({gridApi:null,organization:[],selected:null});function s(e){i.gridApi.applyTransaction({add:[e]})}function r(e){i.gridApi.getRowNode(e.id).setData(e)}const n=p([{field:"id",headerName:"â„–",width:65},{field:"name",headerName:"Nomi",flex:1},{field:"short_name",headerName:"Qisqa nomi",flex:1},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],field:"isActive",headerName:"Faolligi",cellRenderer:R,width:60,headerClass:["px-2"],onCellClicked:e=>{+v.post(`organization/set_activate/${e.data.id}`,{active:!e.value}).then(()=>{e.node.setDataValue("isActive",!e.value)})}},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],headerName:"",width:60,cellRenderer:q,headerClass:["px-2"],onCellClicked:({data:e})=>{i.selected=e.id,_.value.toggle()}}]);return v.get("organization").then(({data:e})=>i.organization=e),(e,u)=>{const g=o("Breadcrumbs"),f=o("AgGridVue"),c=o("v-spacer");return N(),S("section",Q,[E("div",T,[t(g),t(I,{onAddOrganization:s}),t(G,{onEditOrganization:r,ref_key:"editComponent",ref:_,current:i},null,8,["current"])]),t(c,{class:"px-4"},{default:l(()=>[t(f,{headerHeight:34,class:"ag-theme-material h-100",getRowId:({data:a})=>a.id,columnDefs:n,rowData:i.organization,onGridReady:u[0]||(u[0]=a=>i.gridApi=a.api),animateRows:"true"},null,8,["getRowId","columnDefs","rowData"])]),_:1})])}}});export{J as default};
