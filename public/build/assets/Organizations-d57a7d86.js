import{I as j}from"./IconEdit-336cb755.js";import{B as E}from"./Button-19f04297.js";import{d as N,l as p,n as D,a as o,o as O,c as q,w as a,b as e,p as I,j as $,g as w,f as k,m as h,r as F,h as Q,e as G}from"./app-c9a20659.js";import{A as T}from"./ag-grid.css_vue_type_style_index_0_src_true_lang-e699bd52.js";const Y=k("span",null,"Bo'linma kiritish formasi",-1),H=N({__name:"AddOrganization",emits:["addOrganization"],setup(V,{emit:m}){const i=p({dialog:!1}),s=p({name:null,short_name:[],isActive:!0});function c(){h.post("organization",s).then(({data:n})=>{i.dialog=!1,m("addOrganization",n)})}return D(()=>i.dialog,n=>{n&&(s.name=null,s.short_name=null,s.isActive=!0)}),(n,t)=>{const u=o("v-btn"),g=o("v-card-title"),f=o("v-text-field"),d=o("v-col"),l=o("v-switch"),b=o("v-row"),x=o("v-container"),v=o("v-card-text"),z=o("v-spacer"),A=o("v-card-actions"),y=o("v-card"),C=o("v-dialog");return O(),q(b,{justify:"end",class:"flex-0-0 ma-0 pb-2 px-4 overflow-y-auto"},{default:a(()=>[e(C,{modelValue:i.dialog,"onUpdate:modelValue":t[4]||(t[4]=r=>i.dialog=r),persistent:"",width:"512",location:"right"},{activator:a(({props:r})=>[e(u,I({icon:"mdi-plus",color:"teal"},r),null,16)]),default:a(()=>[e(y,{tag:"form",class:"bg-white",onSubmit:$(c,["prevent"])},{default:a(()=>[e(g,{class:"bg-blue-grey-lighten-5"},{default:a(()=>[Y]),_:1}),e(v,{class:"pa-0"},{default:a(()=>[e(x,null,{default:a(()=>[e(b,null,{default:a(()=>[e(d,{cols:"12",class:"pt-0"},{default:a(()=>[e(f,{color:"teal",label:"Nomi",variant:"underlined","hide-details":"auto",modelValue:s.name,"onUpdate:modelValue":t[0]||(t[0]=r=>s.name=r),required:""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",class:"pt-0"},{default:a(()=>[e(f,{color:"teal",label:"Qisqa nomi",variant:"underlined","hide-details":"auto",modelValue:s.short_name,"onUpdate:modelValue":t[1]||(t[1]=r=>s.short_name=r),required:""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",class:"pt-0"},{default:a(()=>[e(l,{label:"Faolligi",modelValue:s.isActive,"onUpdate:modelValue":t[2]||(t[2]=r=>s.isActive=r),"hide-details":"auto",color:"teal"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(A,null,{default:a(()=>[e(z),e(u,{color:"blue-gray-1",variant:"text",type:"button",onClick:t[3]||(t[3]=r=>i.dialog=!1)},{default:a(()=>[w(" Yopish ")]),_:1}),e(u,{color:"blue-darken-1",variant:"text",type:"submit"},{default:a(()=>[w(" Saqlash ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])]),_:1})}}}),M=k("span",null,"Bo'linma kiritish formasi",-1),P=N({__name:"EditOrganization",props:["current"],emits:["editOrganization"],setup(V,{expose:m,emit:i}){const{current:s}=V,c=p({dialog:!1}),n=p({name:null,short_name:null,isActive:!0});function t(){h.patch(`organization/${s.selected}`,n).then(({data:d})=>{c.dialog=!1,i("editOrganization",d)})}function u(d){h.get(`organization/${d}`).then(({data:l})=>{n.name=l.name,n.short_name=l.short_name,n.isActive=!!l.isActive})}function g(){n.name=null,n.short_name=null,n.isActive=!0}return D(()=>c.dialog,d=>{d?u(s.selected):g()}),m({toggle:()=>c.dialog=!0}),(d,l)=>{const b=o("v-card-title"),x=o("v-text-field"),v=o("v-col"),z=o("v-switch"),A=o("v-row"),y=o("v-container"),C=o("v-card-text"),r=o("v-spacer"),B=o("v-btn"),U=o("v-card-actions"),R=o("v-card"),S=o("v-dialog");return O(),q(S,{modelValue:c.dialog,"onUpdate:modelValue":l[4]||(l[4]=_=>c.dialog=_),persistent:"",width:"512",location:"right"},{default:a(()=>[e(R,{tag:"form",class:"bg-white",onSubmit:$(t,["prevent"])},{default:a(()=>[e(b,{class:"bg-blue-grey-lighten-5"},{default:a(()=>[M]),_:1}),e(C,{class:"pa-0"},{default:a(()=>[e(y,null,{default:a(()=>[e(A,null,{default:a(()=>[e(v,{cols:"12",class:"pt-0"},{default:a(()=>[e(x,{color:"teal",label:"Nomi",variant:"underlined","hide-details":"auto",modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=_=>n.name=_),required:""},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",class:"pt-0"},{default:a(()=>[e(x,{color:"teal",label:"Qisqa nomi",variant:"underlined","hide-details":"auto",modelValue:n.short_name,"onUpdate:modelValue":l[1]||(l[1]=_=>n.short_name=_),required:""},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",class:"pt-0"},{default:a(()=>[e(z,{label:"Faolligi",modelValue:n.isActive,"onUpdate:modelValue":l[2]||(l[2]=_=>n.isActive=_),"hide-details":"auto",color:"teal"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(U,null,{default:a(()=>[e(r),e(B,{color:"blue-gray-1",variant:"text",type:"button",onClick:l[3]||(l[3]=_=>c.dialog=!1)},{default:a(()=>[w(" Yopish ")]),_:1}),e(B,{color:"blue-darken-1",variant:"text",type:"submit"},{default:a(()=>[w(" Saqlash ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])}}}),J={class:"d-flex flex-column"},K={class:"d-flex justify-space-between items-center"},ee=N({__name:"Organizations",setup(V){const m=F(),i=p({gridApi:null,organization:[],selected:null});function s(t){i.gridApi.applyTransaction({add:[t]})}function c(t){i.gridApi.getRowNode(t.id).setData(t)}const n=p([{field:"id",headerName:"â„–",width:65},{field:"name",headerName:"Nomi",flex:1},{field:"short_name",headerName:"Qisqa nomi",flex:1},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],field:"isActive",headerName:"Faolligi",cellRenderer:E,width:60,headerClass:["px-2"],onCellClicked:t=>{+h.post(`organization/set_activate/${t.data.id}`,{active:!t.value}).then(()=>{t.node.setDataValue("isActive",!t.value)})}},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],headerName:"",width:60,cellRenderer:j,headerClass:["px-2"],onCellClicked:({data:t})=>{i.selected=t.id,m.value.toggle()}}]);return h.get("organization").then(({data:t})=>i.organization=t),(t,u)=>{const g=o("Breadcrumbs"),f=o("v-spacer");return O(),Q("section",J,[k("div",K,[e(g),e(H,{onAddOrganization:s}),e(P,{onEditOrganization:c,ref_key:"editComponent",ref:m,current:i},null,8,["current"])]),e(f,{class:"px-4"},{default:a(()=>[e(G(T),{headerHeight:34,class:"ag-theme-material h-100",getRowId:({data:d})=>d.id,columnDefs:n,rowData:i.organization,onGridReady:u[0]||(u[0]=d=>i.gridApi=d.api),animateRows:"true"},null,8,["getRowId","columnDefs","rowData"])]),_:1})])}}});export{ee as default};
