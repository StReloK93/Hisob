import{I as j}from"./IconEdit-d3b67f9e.js";import{B as E}from"./Button-298d0ea7.js";import{_ as I,A as F}from"./ag-grid.css_vue_type_style_index_0_src_true_lang-cb50b56a.js";import{d as N,j as f,l as $,a as o,o as O,c as q,w as t,b as e,m as Q,i as B,f as w,e as k,k as h,r as G,h as T,g as Y}from"./app-046936e3.js";const M=k("span",null,"Bo'linma kiritish formasi",-1),P=N({__name:"AddOrganization",emits:["addOrganization"],setup(V,{emit:p}){const i=f({dialog:!1}),s=f({name:null,short_name:[],isActive:!0});function c(){h.post("organization",s).then(({data:n})=>{i.dialog=!1,p("addOrganization",n)})}return $(()=>i.dialog,n=>{n&&(s.name=null,s.short_name=null,s.isActive=!0)}),(n,a)=>{const d=o("v-btn"),g=o("v-card-title"),m=o("v-text-field"),u=o("v-col"),l=o("v-switch"),x=o("v-row"),b=o("v-container"),v=o("v-card-text"),z=o("v-spacer"),A=o("v-card-actions"),y=o("v-card"),C=o("v-dialog");return O(),q(x,{justify:"end",class:"flex-0-0 ma-0 pb-2 px-4 overflow-y-auto"},{default:t(()=>[e(C,{modelValue:i.dialog,"onUpdate:modelValue":a[4]||(a[4]=r=>i.dialog=r),persistent:"",width:"512",location:"right"},{activator:t(({props:r})=>[e(d,Q({icon:"mdi-plus",color:"teal"},r),null,16)]),default:t(()=>[e(y,{tag:"form",class:"bg-white",onSubmit:B(c,["prevent"])},{default:t(()=>[e(g,{class:"bg-blue-grey-lighten-5"},{default:t(()=>[M]),_:1}),e(v,{class:"pa-0"},{default:t(()=>[e(b,null,{default:t(()=>[e(x,null,{default:t(()=>[e(u,{cols:"12",class:"pt-0"},{default:t(()=>[e(m,{color:"teal",label:"Nomi",variant:"underlined","hide-details":"auto",modelValue:s.name,"onUpdate:modelValue":a[0]||(a[0]=r=>s.name=r),required:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",class:"pt-0"},{default:t(()=>[e(m,{color:"teal",label:"Qisqa nomi",variant:"underlined","hide-details":"auto",modelValue:s.short_name,"onUpdate:modelValue":a[1]||(a[1]=r=>s.short_name=r),required:""},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",class:"pt-0"},{default:t(()=>[e(l,{label:"Faolligi",modelValue:s.isActive,"onUpdate:modelValue":a[2]||(a[2]=r=>s.isActive=r),"hide-details":"auto",color:"teal"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(z),e(d,{color:"blue-gray-1",variant:"text",type:"button",onClick:a[3]||(a[3]=r=>i.dialog=!1)},{default:t(()=>[w(" Yopish ")]),_:1}),e(d,{color:"blue-darken-1",variant:"text",type:"submit"},{default:t(()=>[w(" Saqlash ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])]),_:1})}}}),H=k("span",null,"Bo'linma kiritish formasi",-1),J=N({__name:"EditOrganization",props:["current"],emits:["editOrganization"],setup(V,{expose:p,emit:i}){const{current:s}=V,c=f({dialog:!1}),n=f({name:null,short_name:null,isActive:!0});function a(){h.patch(`organization/${s.selected}`,n).then(({data:u})=>{c.dialog=!1,i("editOrganization",u)})}function d(u){h.get(`organization/${u}`).then(({data:l})=>{n.name=l.name,n.short_name=l.short_name,n.isActive=!!l.isActive})}function g(){n.name=null,n.short_name=null,n.isActive=!0}return $(()=>c.dialog,u=>{u?d(s.selected):g()}),p({toggle:()=>c.dialog=!0}),(u,l)=>{const x=o("v-card-title"),b=o("v-text-field"),v=o("v-col"),z=o("v-switch"),A=o("v-row"),y=o("v-container"),C=o("v-card-text"),r=o("v-spacer"),D=o("v-btn"),U=o("v-card-actions"),R=o("v-card"),S=o("v-dialog");return O(),q(S,{modelValue:c.dialog,"onUpdate:modelValue":l[4]||(l[4]=_=>c.dialog=_),persistent:"",width:"512",location:"right"},{default:t(()=>[e(R,{tag:"form",class:"bg-white",onSubmit:B(a,["prevent"])},{default:t(()=>[e(x,{class:"bg-blue-grey-lighten-5"},{default:t(()=>[H]),_:1}),e(C,{class:"pa-0"},{default:t(()=>[e(y,null,{default:t(()=>[e(A,null,{default:t(()=>[e(v,{cols:"12",class:"pt-0"},{default:t(()=>[e(b,{color:"teal",label:"Nomi",variant:"underlined","hide-details":"auto",modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=_=>n.name=_),required:""},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",class:"pt-0"},{default:t(()=>[e(b,{color:"teal",label:"Qisqa nomi",variant:"underlined","hide-details":"auto",modelValue:n.short_name,"onUpdate:modelValue":l[1]||(l[1]=_=>n.short_name=_),required:""},null,8,["modelValue"])]),_:1}),e(v,{cols:"12",class:"pt-0"},{default:t(()=>[e(z,{label:"Faolligi",modelValue:n.isActive,"onUpdate:modelValue":l[2]||(l[2]=_=>n.isActive=_),"hide-details":"auto",color:"teal"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(r),e(D,{color:"blue-gray-1",variant:"text",type:"button",onClick:l[3]||(l[3]=_=>c.dialog=!1)},{default:t(()=>[w(" Yopish ")]),_:1}),e(D,{color:"blue-darken-1",variant:"text",type:"submit"},{default:t(()=>[w(" Saqlash ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])}}}),K={class:"d-flex flex-column"},L={class:"d-flex justify-space-between items-center"},te=N({__name:"Organizations",setup(V){const p=G(),i=f({gridApi:null,organization:[],selected:null});function s(a){i.gridApi.applyTransaction({add:[a]})}function c(a){i.gridApi.getRowNode(a.id).setData(a)}const n=f([{field:"id",headerName:"â„–",width:65},{field:"name",headerName:"Nomi",flex:1},{field:"short_name",headerName:"Qisqa nomi",flex:1},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],field:"isActive",headerName:"Faolligi",cellRenderer:E,width:60,headerClass:["px-2"],onCellClicked:a=>{const d=+!a.value;h.post(`organization/set_activate/${a.data.id}`,{active:d}).then(()=>{a.node.setDataValue("isActive",d)})}},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],headerName:"",width:60,cellRenderer:j,headerClass:["px-2"],onCellClicked:({data:a})=>{i.selected=a.id,p.value.toggle()}}]);return h.get("organization").then(({data:a})=>i.organization=a),(a,d)=>{const g=o("v-spacer");return O(),T("section",K,[k("div",L,[e(I),e(P,{onAddOrganization:s}),e(J,{onEditOrganization:c,ref_key:"editComponent",ref:p,current:i},null,8,["current"])]),e(g,{class:"px-4"},{default:t(()=>[e(Y(F),{class:"ag-theme-material h-100",getRowId:({data:m})=>m.id,columnDefs:n,rowData:i.organization,onGridReady:d[0]||(d[0]=m=>i.gridApi=m.api),animateRows:"true"},null,8,["getRowId","columnDefs","rowData"])]),_:1})])}}});export{te as default};
