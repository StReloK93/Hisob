import{d as V,m as g,b as e,o as C,c as k,w as l,f as o,p as D,h as p,n as h,a as A,r as b,i as B,e as M,j as y}from"./app-257e65fd.js";import{r as W}from"./helpers-ca74a7fa.js";import{I as $}from"./IconEdit-778fb29f.js";const F=V({__name:"AddWorkingCondition",emits:["addWorkingCondition"],setup(x,{emit:s}){const c=g({dialog:!1}),t=g({name:null});async function u(){await h.post("working_condition",t).then(({data:m})=>{c.dialog=!1,s("addWorkingCondition",m)})}return(m,d)=>{const _=e("v-btn"),n=e("v-text-field"),r=e("v-col"),a=e("v-row"),f=e("CustomForm"),v=e("v-dialog");return C(),k(a,{justify:"end",class:"flex-0-0 ma-0 pb-2 px-4 overflow-y-auto"},{default:l(()=>[o(v,{modelValue:c.dialog,"onUpdate:modelValue":d[2]||(d[2]=i=>c.dialog=i),persistent:"",width:"512",location:"right"},{activator:l(({props:i})=>[o(_,D({icon:"mdi-plus"},i),null,16)]),default:l(()=>[o(f,{submitMethod:u,onClose:d[1]||(d[1]=i=>c.dialog=!1),title:"Mehnat sharoitini kiritish"},{default:l(()=>[o(a,null,{default:l(()=>[o(r,{cols:"12",class:"pt-0"},{default:l(()=>[o(n,{label:"Nomi",modelValue:t.name,"onUpdate:modelValue":d[0]||(d[0]=i=>t.name=i),rules:p(W)},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),I=V({__name:"EditWorkingCondition",props:["current"],emits:["editWorkingCondition"],setup(x,{expose:s,emit:c}){const{current:t}=x,u=g({dialog:!1}),m=g({name:null});async function d(){await h.patch(`working_condition/${t.selected}`,m).then(({data:r})=>{u.dialog=!1,c("editWorkingCondition",r)})}async function _(){h.get(`working_condition/${t.selected}`).then(({data:r})=>{m.name=r.name})}return s({toggle:()=>u.dialog=!0}),(r,a)=>{const f=e("v-text-field"),v=e("v-col"),i=e("v-row"),N=e("CustomForm"),R=e("v-dialog");return C(),k(R,{modelValue:u.dialog,"onUpdate:modelValue":a[2]||(a[2]=w=>u.dialog=w),persistent:"",width:"512",location:"right"},{default:l(()=>[o(N,{submitMethod:d,onClose:a[1]||(a[1]=w=>u.dialog=!1),onVnodeMounted:_,title:"Mehnat sharoitini tahrirlash"},{default:l(()=>[o(i,null,{default:l(()=>[o(v,{cols:"12",class:"pt-0"},{default:l(()=>[o(f,{label:"Nomi",modelValue:m.name,"onUpdate:modelValue":a[0]||(a[0]=w=>m.name=w),rules:p(W)},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"])}}}),j={class:"d-flex flex-column"},E={class:"d-flex justify-space-between items-center"},K=V({__name:"WorkingConditions",setup(x){const s=A(),c=b(),t=g({selected:null,gridApi:null});function u(n){t.gridApi.applyTransaction({add:[n],addIndex:0})}function m(n){t.gridApi.getRowNode(n.id).setData(n)}const d=g([{field:"id",headerName:"Kod",width:80},{field:"name",headerName:"Nomi",flex:1},{hide:s.userRoles.includes(1)==!1||s.userRoles.includes(4)==!1,cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],headerName:"",width:60,cellRenderer:$,headerClass:["px-2"],onCellClicked:({data:n})=>{t.selected=n.id,c.value.toggle()}}]),_=b([]);return h.get("working_condition").then(({data:n})=>_.value=n),(n,r)=>{const a=e("Breadcrumbs"),f=e("AgGridVue"),v=e("v-spacer");return C(),B("section",j,[M("div",E,[o(a),p(s).userRoles.includes(1)||p(s).userRoles.includes(4)?(C(),k(F,{key:0,onAddWorkingCondition:u})):y("",!0),p(s).userRoles.includes(1)||p(s).userRoles.includes(4)?(C(),k(I,{key:1,onEditWorkingCondition:m,ref_key:"editComponent",ref:c,current:t},null,8,["current"])):y("",!0)]),o(v,{class:"px-4"},{default:l(()=>[o(f,{headerHeight:34,defaultColDef:{sortable:!0},class:"ag-theme-material h-100",getRowId:({data:i})=>i.id,columnDefs:d,rowData:_.value,onGridReady:r[0]||(r[0]=i=>t.gridApi=i.api),animateRows:"true"},null,8,["getRowId","columnDefs","rowData"])]),_:1})])}}});export{K as default};
