import{d as $,r as b,l as p,a as t,o as A,c as M,w as o,b as e,p as j,j as R,g as k,f as B,m as w,h as E,e as U}from"./app-c9a20659.js";import{I as q}from"./IconEdit-336cb755.js";import{A as G}from"./ag-grid.css_vue_type_style_index_0_src_true_lang-e699bd52.js";const Y=B("span",null,"Mahsulot kiritish formasi",-1),F=$({__name:"AddWorkingCondition",emits:["addWorkingCondition"],setup(h,{emit:m}){const i=b(),s=p({dialog:!1,rules:[l=>l==null||l==""?"toldiring":!0]}),c=p({name:null});async function r(){const{valid:l}=await i.value.validate();l!=!1&&w.post("working_condition",c).then(({data:n})=>{s.dialog=!1,m("addWorkingCondition",n)})}return(l,n)=>{const _=t("v-btn"),f=t("v-card-title"),d=t("v-text-field"),a=t("v-col"),g=t("v-row"),C=t("v-container"),y=t("v-card-text"),V=t("v-spacer"),W=t("v-card-actions"),N=t("v-card"),D=t("v-form"),v=t("v-dialog");return A(),M(g,{justify:"end",class:"flex-0-0 ma-0 pb-2 px-4 overflow-y-auto"},{default:o(()=>[e(v,{modelValue:s.dialog,"onUpdate:modelValue":n[3]||(n[3]=u=>s.dialog=u),persistent:"",width:"512",location:"right"},{activator:o(({props:u})=>[e(_,j({icon:"mdi-plus",color:"teal"},u),null,16)]),default:o(()=>[e(D,{onSubmit:R(r,["prevent"]),ref_key:"formTag",ref:i,onVnodeMounted:n[2]||(n[2]=u=>i.value.reset())},{default:o(()=>[e(N,{class:"bg-white"},{default:o(()=>[e(f,{class:"bg-blue-grey-lighten-5"},{default:o(()=>[Y]),_:1}),e(y,{class:"pa-0"},{default:o(()=>[e(C,null,{default:o(()=>[e(g,null,{default:o(()=>[e(a,{cols:"12",class:"pt-0"},{default:o(()=>[e(d,{color:"teal",label:"Nomi",modelValue:c.name,"onUpdate:modelValue":n[0]||(n[0]=u=>c.name=u),variant:"underlined","hide-details":"auto",rules:s.rules},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e(W,null,{default:o(()=>[e(V),e(_,{color:"blue-gray-1",variant:"text",type:"button",onClick:n[1]||(n[1]=u=>s.dialog=!1)},{default:o(()=>[k(" Yopish ")]),_:1}),e(_,{color:"blue-darken-1",variant:"text",type:"submit"},{default:o(()=>[k(" Saqlash ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])]),_:1})}}}),H=B("span",null,"Mahsulot kiritish formasi",-1),K=$({__name:"EditWorkingCondition",props:["current"],emits:["editWorkingCondition"],setup(h,{expose:m,emit:i}){const{current:s}=h,c=b(),r=p({dialog:!1,rules:[d=>d==null||d==""?"toldiring":!0]}),l=p({name:null});async function n(){const{valid:d}=await c.value.validate();d!=!1&&w.patch(`working_condition/${s.selected}`,l).then(({data:a})=>{r.dialog=!1,i("editWorkingCondition",a)})}async function _(){c.value.reset(),w.get(`working_condition/${s.selected}`).then(({data:d})=>{l.name=d.name})}return m({toggle:()=>r.dialog=!0}),(d,a)=>{const g=t("v-card-title"),C=t("v-text-field"),y=t("v-col"),V=t("v-row"),W=t("v-container"),N=t("v-card-text"),D=t("v-spacer"),v=t("v-btn"),u=t("v-card-actions"),S=t("v-card"),T=t("v-form"),I=t("v-dialog");return A(),M(I,{modelValue:r.dialog,"onUpdate:modelValue":a[2]||(a[2]=x=>r.dialog=x),persistent:"",width:"512",location:"right"},{default:o(()=>[e(T,{onSubmit:R(n,["prevent"]),ref_key:"formTag",ref:c,onVnodeMounted:_},{default:o(()=>[e(S,{class:"bg-white"},{default:o(()=>[e(g,{class:"bg-blue-grey-lighten-5"},{default:o(()=>[H]),_:1}),e(N,{class:"pa-0"},{default:o(()=>[e(W,null,{default:o(()=>[e(V,null,{default:o(()=>[e(y,{cols:"12",class:"pt-0"},{default:o(()=>[e(C,{color:"teal",label:"Nomi",modelValue:l.name,"onUpdate:modelValue":a[0]||(a[0]=x=>l.name=x),variant:"underlined","hide-details":"auto",rules:r.rules},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e(u,null,{default:o(()=>[e(D),e(v,{color:"blue-gray-1",variant:"text",type:"button",onClick:a[1]||(a[1]=x=>r.dialog=!1)},{default:o(()=>[k(" Yopish ")]),_:1}),e(v,{color:"blue-darken-1",variant:"text",type:"submit"},{default:o(()=>[k(" Saqlash ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])}}}),z={class:"d-flex flex-column"},J={class:"d-flex justify-space-between items-center"},Q=$({__name:"WorkingConditions",setup(h){const m=b(),i=p({selected:null,gridApi:null});function s(n){i.gridApi.applyTransaction({add:[n],addIndex:0})}function c(n){i.gridApi.getRowNode(n.id).setData(n)}const r=p([{field:"id",headerName:"Kod",width:80},{field:"name",headerName:"Nomi",flex:1},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],headerName:"",width:60,cellRenderer:q,headerClass:["px-2"],onCellClicked:({data:n})=>{i.selected=n.id,m.value.toggle()}}]),l=b([]);return w.get("working_condition").then(({data:n})=>l.value=n),(n,_)=>{const f=t("Breadcrumbs"),d=t("v-spacer");return A(),E("section",z,[B("div",J,[e(f),e(F,{onAddWorkingCondition:s}),e(K,{onEditWorkingCondition:c,ref_key:"editComponent",ref:m,current:i},null,8,["current"])]),e(d,{class:"px-4"},{default:o(()=>[e(U(G),{headerHeight:34,class:"ag-theme-material h-100",getRowId:({data:a})=>a.id,columnDefs:r,rowData:l.value,onGridReady:_[0]||(_[0]=a=>i.gridApi=a.api),animateRows:"true"},null,8,["getRowId","columnDefs","rowData"])]),_:1})])}}});export{Q as default};
