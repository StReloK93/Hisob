import{d as C,r as x,l as v,a as t,o as D,c as F,w as n,b as e,p as $,j as k,g as A,m as w,h as B,f as U}from"./app-eb415e53.js";import{I as j}from"./IconEdit-cefb1ea4.js";const E=C({__name:"AddPositionType",emits:["addPositionType"],setup(V,{emit:p}){const d=x(),i=v({dialog:!1,rules:[l=>l==null||l==""?"toldiring":!0]}),r=v({name:null,code:null});async function c(){const{valid:l}=await d.value.validate();l!=!1&&w.post("position_type",r).then(({data:o})=>{i.dialog=!1,p("addPositionType",o)})}return(l,o)=>{const _=t("v-btn"),g=t("v-card-title"),s=t("v-text-field"),a=t("v-col"),m=t("v-row"),y=t("v-container"),b=t("v-card-text"),T=t("FormFooter"),h=t("v-card"),N=t("v-form"),P=t("v-dialog");return D(),F(m,{justify:"end",class:"flex-0-0 ma-0 pb-2 px-4 overflow-y-auto"},{default:n(()=>[e(P,{modelValue:i.dialog,"onUpdate:modelValue":o[4]||(o[4]=u=>i.dialog=u),persistent:"",width:"512",location:"right"},{activator:n(({props:u})=>[e(_,$({icon:"mdi-plus"},u),null,16)]),default:n(()=>[e(N,{onSubmit:k(c,["prevent"]),ref_key:"formTag",ref:d,onVnodeMounted:o[3]||(o[3]=u=>d.value.reset())},{default:n(()=>[e(h,{class:"bg-white"},{default:n(()=>[e(g,null,{default:n(()=>[A(" Ish turini kiritish ")]),_:1}),e(b,{class:"pa-0"},{default:n(()=>[e(y,null,{default:n(()=>[e(m,null,{default:n(()=>[e(a,{cols:"12",class:"pt-0"},{default:n(()=>[e(s,{class:"mb-2",label:"Tartib raqami",modelValue:r.code,"onUpdate:modelValue":o[0]||(o[0]=u=>r.code=u),rules:i.rules},null,8,["modelValue","rules"]),e(s,{class:"mb-2",label:"Nomi",modelValue:r.name,"onUpdate:modelValue":o[1]||(o[1]=u=>r.name=u),rules:i.rules},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e(T,{onClose:o[2]||(o[2]=u=>i.dialog=!1)})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])]),_:1})}}}),M=C({__name:"EditPositionType",props:["current"],emits:["editPositionType"],setup(V,{expose:p,emit:d}){const{current:i}=V,r=x(),c=v({dialog:!1,rules:[s=>s==null||s==""?"toldiring":!0]}),l=v({name:null,code:null});async function o(){const{valid:s}=await r.value.validate();s!=!1&&w.patch(`position_type/${i.selected}`,l).then(({data:a})=>{c.dialog=!1,d("editPositionType",a)})}async function _(){r.value.reset(),w.get(`position_type/${i.selected}`).then(({data:s})=>{l.name=s.name,l.code=s.code})}return p({toggle:()=>c.dialog=!0}),(s,a)=>{const m=t("v-card-title"),y=t("v-text-field"),b=t("v-col"),T=t("v-row"),h=t("v-container"),N=t("v-card-text"),P=t("FormFooter"),u=t("v-card"),I=t("v-form"),R=t("v-dialog");return D(),F(R,{modelValue:c.dialog,"onUpdate:modelValue":a[3]||(a[3]=f=>c.dialog=f),persistent:"",width:"512",location:"right"},{default:n(()=>[e(I,{onSubmit:k(o,["prevent"]),ref_key:"formTag",ref:r,onVnodeMounted:_},{default:n(()=>[e(u,{class:"bg-white"},{default:n(()=>[e(m,null,{default:n(()=>[A(" Ish turini tahrirlash ")]),_:1}),e(N,{class:"pa-0"},{default:n(()=>[e(h,null,{default:n(()=>[e(T,null,{default:n(()=>[e(b,{cols:"12",class:"pt-0"},{default:n(()=>[e(y,{class:"mb-2",label:"Tartib raqami",modelValue:l.code,"onUpdate:modelValue":a[0]||(a[0]=f=>l.code=f),rules:c.rules},null,8,["modelValue","rules"]),e(y,{class:"mb-2",label:"Nomi",modelValue:l.name,"onUpdate:modelValue":a[1]||(a[1]=f=>l.name=f),rules:c.rules},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{onClose:a[2]||(a[2]=f=>c.dialog=!1)})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"])}}}),S={class:"d-flex flex-column"},G={class:"d-flex justify-space-between items-center"},K=C({__name:"PositionTypes",setup(V){const p=x(),d=v({selected:null,gridApi:null});function i(o){d.gridApi.applyTransaction({add:[o],addIndex:0})}function r(o){d.gridApi.getRowNode(o.id).setData(o)}const c=v([{field:"id",headerName:"Kod",width:80},{field:"code",headerName:"T/R",width:80},{field:"name",headerName:"Nomi",flex:1},{cellClass:["d-flex","justify-center","align-center","px-2","bg-gray-100"],headerName:"",width:60,cellRenderer:j,headerClass:["px-2"],onCellClicked:({data:o})=>{d.selected=o.id,p.value.toggle()}}]),l=x([]);return w.get("position_type").then(({data:o})=>l.value=o),(o,_)=>{const g=t("Breadcrumbs"),s=t("AgGridVue"),a=t("v-spacer");return D(),B("section",S,[U("div",G,[e(g),e(E,{onAddPositionType:i}),e(M,{onEditPositionType:r,ref_key:"editComponent",ref:p,current:d},null,8,["current"])]),e(a,{class:"px-4"},{default:n(()=>[e(s,{headerHeight:34,class:"ag-theme-material h-100",getRowId:({data:m})=>m.id,columnDefs:c,rowData:l.value,onGridReady:_[0]||(_[0]=m=>d.gridApi=m.api),animateRows:"true"},null,8,["getRowId","columnDefs","rowData"])]),_:1})])}}});export{K as default};
